WHITESPACE = _{ " " | "\t" }
NEWLINE = _{ "\n" | "\r\n" }
COMMENT = _{ ";" ~ (!NEWLINE ~ ANY)* }

instruction = _{ mov | add | sub | mul | div | jmp | cmp | label }

program = { SOI ~ (instruction ~ (NEWLINE | COMMENT)*)* ~ EOI }

mov = { "mov" ~ WHITESPACE ~ operand ~ "," ~ WHITESPACE ~ operand }
add = { "add" ~ WHITESPACE ~ operand ~ "," ~ WHITESPACE ~ operand }
sub = { "sub" ~ WHITESPACE ~ operand ~ "," ~ WHITESPACE ~ operand }
mul = { "mul" ~ WHITESPACE ~ operand }
div = { "div" ~ WHITESPACE ~ operand }
jmp = { "jmp" ~ WHITESPACE ~ label }
cmp = { "cmp" ~ WHITESPACE ~ operand ~ "," ~ WHITESPACE ~ operand }

label = @{ ASCII_ALPHANUMERIC+ ~ ":" }
operand = { register | number | label }

register = _{ "ax" | "bx" | "cx" | "dx" | "sp" | "bp" | "si" | "di" | "cs" | "ds" | "es" | "ss" }
number = @{ ASCII_DIGIT+ }
